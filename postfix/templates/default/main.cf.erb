###
# Generated by Chef for <%= node[:fqdn] %>
###

smtpd_banner = $myhostname ESMTP $mail_name
biff = no
append_dot_mydomain = no

alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
mynetworks = 127.0.0.0/8, 10.0.0.0/30
mailbox_size_limit = 0
recipient_delimiter = +
myorigin = $mydomain

# SECURITY NOTE: Listening on all interfaces. Make sure your firewall is
# configured correctly
inet_interfaces = all

<% if node[:postfix][:mode] == 'relay' %>
smtp_sasl_auth_enable = yes 
smtp_sasl_password_maps = static:<%= node.postfix.username %>:<%= node.postfix.password %>
smtp_sasl_security_options = noanonymous 
header_size_limit = 4096000
relayhost = [smtp.sendgrid.net]:25
<% end %>

default_destination_concurrency_limit = 20

soft_bounce = yes
